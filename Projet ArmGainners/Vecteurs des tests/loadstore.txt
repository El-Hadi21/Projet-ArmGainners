# ==============================================================================
# VECTEURS DE TEST LOAD_STORE (PARM / ARM Cortex-M0)
# ==============================================================================
# Verifie la machine a etats (2 cycles), le calcul d'adresse et les signaux de controle.
#
# Entrees :
# - Instruction[16] : Code instruction (LDR=10011..., STR=10010...)
# - Enable[1]       : Signal d'activation du bloc
# - Stack_Pointer[32] : Valeur de SP pour le calcul d'adresse
# - Clk[1]          : Horloge
# - Reset[1]        : Reinitialisation
#
# Sorties :
# - Store[1], Load[1], PC_Hold[1]
# - Rmd[3]          : Registre Source/Destination
# - RAM_Addr[32]    : Adresse calculee (SP + Imm8)
# ==============================================================================
Instruction[16]  Enable[1] Stack_Pointer[32]                Clk[1] Reset[1] Store[1] Load[1] PC_Hold[1] Rmd[3] RAM_Addr[32]

# ------------------------------------------------------------------------------
# 1. RESET
# ------------------------------------------------------------------------------
0000000000000000 0         00000000000000000000000000000000 0      1        0        0       0          000    00000000000000000000000000000000
0000000000000000 0         00000000000000000000000000000000 1      1        0        0       0          000    00000000000000000000000000000000

# ------------------------------------------------------------------------------
# 2. TEST STR (Store Register) - Opcode 10010
# Inst: 1001 0 001 0000 0100 (STR R1, [SP, #4])
# SP = 0x100. Addr attendue = 0x100 + 4 = 0x104.
# Cycle 1: PC_Hold=1, Store=1 (ecriture immediate)
# Cycle 2: PC_Hold=0, Store=0 (termine)
# ------------------------------------------------------------------------------
# Setup Inputs (Clk 0)
1001000100000100 1         00000000000000000000000100000000 0      0        1        0       1          001    00000000000000000000000100000100
# Cycle 1 (Clk 1) -> Capture etat
1001000100000100 1         00000000000000000000000100000000 1      0        1        0       1          001    00000000000000000000000100000100
# Cycle 2 (Clk 0->1) -> Relachement
1001000100000100 1         00000000000000000000000100000000 0      0        0        0       0          001    00000000000000000000000100000100
1001000100000100 1         00000000000000000000000100000000 1      0        0        0       0          001    00000000000000000000000100000100

# ------------------------------------------------------------------------------
# 3. TEST LDR (Load Register) - Opcode 10011
# Inst: 1001 1 010 0000 1000 (LDR R2, [SP, #8])
# SP = 0x100. Addr attendue = 0x100 + 8 = 0x108.
# Cycle 1: PC_Hold=1, Load=0 (attente RAM)
# Cycle 2: PC_Hold=0, Load=1 (lecture effective)
# ------------------------------------------------------------------------------
# Setup Inputs (Clk 0) - Retour a l'etat initial (car fin cycle precedent)
1001101000001000 1         00000000000000000000000100000000 0      0        0        0       1          010    00000000000000000000000100001000
# Cycle 1 (Clk 1) -> Capture etat wait
1001101000001000 1         00000000000000000000000100000000 1      0        0        0       1          010    00000000000000000000000100001000
# Cycle 2 (Clk 0->1) -> Lecture activee
1001101000001000 1         00000000000000000000000100000000 0      0        0        1       0          010    00000000000000000000000100001000
1001101000001000 1         00000000000000000000000100000000 1      0        0        1       0          010    00000000000000000000000100001000

# ------------------------------------------------------------------------------
# 4. TEST ENABLE = 0 (Desactivation)
# Meme instruction LDR valide, mais Enable a 0. Tout doit etre a 0.
# ------------------------------------------------------------------------------
1001101000001000 0         00000000000000000000000100000000 0      0        0        0       0          000    00000000000000000000000000000000
1001101000001000 0         00000000000000000000000100000000 1      0        0        0       0          000    00000000000000000000000000000000